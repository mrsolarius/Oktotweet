<div class="grid grid-cols-1 md:grid-cols-2 w-screen h-screen bg-img bg-red-planet">
  <div class="items-center justify-center">
    <div style="height: 100%;align-items: center;display: flex;">
      <div style="background: linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(0,0,0,0.1) 10%, rgba(0,0,0,0.1) 90%, rgba(255,255,255,0) 100%); width: 100%;">
        <div class="md:p-20 p-5">
          <img class="oktoLogo" src="<%= image_path("oktotweet.svg") %>">
          <h1 class="oktoTitle xl:text-6xl md:text-2xl text-3xl lg:text-4xl">OktoTweet</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="p-5 md:p-10 lg:p-20 bg-dark md:rounded-l-3xl rounded-t-3xl">
    <p id="notice"><%= notice %></p>

    <h1>Se connecter !</h1>

    <div class="scrolling">
      <div class="grid gap-5 sm:grid-cols-2 md:grid-cols-1 xl:grid-cols-2 grid-cols-1 mt-5">
        <% @users.each do |user| %>
        <a href="<%= user_path(user) %>" class="items-center justify-center profileMainContainer">
         <div class="profileContainer">
            <div class="-mt-8 md:-my-4 md:-ml-16">
              <img
                class="w-auto h-48 profileImage"
                src="<%= user.imageUrl %>"
                alt="<%= user.name %>"
                />
            </div>
            <div class="flex flex-col ml-4 overflow-hidden whitespace-nowrap">
              <div class="flex flex-col items-center md:items-start">
                <h2 class="text-xl font-medium"><%= user.name %></h2>
                <p class="text-base font-medium text-gray-400"><%= user.bio %></p>
              </div>
            </div>
          </div>
        </a>
        <% end %>
      </div>
    </div>

    <!--
    <table>
      <tbody>
        <% @users.each do |user| %>
          <tr>
            <td><%= user.name %></td>
            <td><%= user.bio %></td>
            <td><%= user.imageUrl %></td>
            <td><%= link_to 'Show', user %></td>
            <td><%= link_to 'Edit', edit_user_path(user) %></td>
            <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>

          </tr>
        <% end %>
      </tbody>
    </table>
    -->
    <br>
        <button class="modal-open slideButton" style="width: 12rem">
          <span class="circle" aria-hidden="true">
            <span class="icon arrow"></span>
          </span>
          <span class="button-text">S'enregistrer</span>
        </button>
  </div>
</div>




<div class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center">
  <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>

  <div class="modal-container bg-dark w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto rounded-3xl">

    <div class="modal-close absolute top-0 right-0 cursor-pointer flex flex-col items-center mt-4 mr-4 text-white text-sm z-50">
      <svg class="fill-current text-white" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
        <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
      </svg>
      <span class="text-sm">(Esc)</span>
    </div>



      <!-- Add margin if you want to see some of the overlay behind the modal-->
      <div class="modal-content py-4 text-left px-10 pt-6">
        <!--Title-->
        <div class="flex justify-between items-center pb-3">
          <h1 class="mb-0">Insctiption !</h1>
          <div class="modal-close cursor-pointer z-50">
            <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18">
              <path d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z"></path>
            </svg>
          </div>
        </div>
        <%= form_with model: @user, validate: true do |form| %>
          <% if @user.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

              <ul>
                <% @user.errors.each do |error| %>
                  <li><%= error.full_message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <div class="field">
            <%= form.label :name, 'Nom d\'utilisateur' %>
            <%= form.text_field :name %>
          </div>

          <div class="field">
            <%= form.label :bio, 'Biographie' %>
            <%= form.text_area :bio %>
          </div>

          <div class="field">
            <%= form.label :imageUrl, 'URL d\'image de profile' %>
            <%= form.text_area :imageUrl %>
          </div>

        <!--Footer-->
        <div class="flex justify-end pt-2">
          <button type="reset" class="modal-close px-4 bg-transparent p-3 rounded-lg text-red-imperial hover:bg-gray-100 hover:text-red-imperial mr-2">Anuler</button>
          <button type="submit" class="px-4 bg-red-imperial p-3 rounded-lg text-white hover:bg-blue-space">S'enregistrer</button>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
    var openmodal = document.querySelectorAll('.modal-open')
    for (var i = 0; i < openmodal.length; i++) {
        openmodal[i].addEventListener('click', function(event){
            event.preventDefault()
            toggleModal()
        })
    }

    const overlay = document.querySelector('.modal-overlay')
    overlay.addEventListener('click', toggleModal)

    var closemodal = document.querySelectorAll('.modal-close')
    for (var i = 0; i < closemodal.length; i++) {
        closemodal[i].addEventListener('click', toggleModal)
    }

    document.onkeydown = function(evt) {
        evt = evt || window.event
        var isEscape = false
        if ("key" in evt) {
            isEscape = (evt.key === "Escape" || evt.key === "Esc")
        } else {
            isEscape = (evt.keyCode === 27)
        }
        if (isEscape && document.body.classList.contains('modal-active')) {
            toggleModal()
        }
    };


    function toggleModal () {
        const body = document.querySelector('body')
        const modal = document.querySelector('.modal')
        modal.classList.toggle('opacity-0')
        modal.classList.toggle('pointer-events-none')
        body.classList.toggle('modal-active')
    }


</script>